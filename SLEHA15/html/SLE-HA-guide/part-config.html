<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SLEHA 15 | Administration Guide | Configuration and Administration</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Configuration and Administration | SLEHA 15"/>
<meta name="description" content="The main purpose of an HA cluster is to manage user services. Typical examples of user services are an Apache Web server or a database. From the user…"/>
<meta name="product-name" content="SUSE Linux Enterprise High Availability Extension"/>
<meta name="product-number" content="15"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Part II. Configuration and Administration"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise High Availability Extension 15"/>
<meta property="og:title" content="Configuration and Administration | SLEHA 15"/>
<meta property="og:description" content="The main purpose of an HA cluster is to manage user services. Typical examples of user services are an Apache Web server or a database. From the user…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configuration and Administration | SLEHA 15"/>
<meta name="twitter:description" content="The main purpose of an HA cluster is to manage user services. Typical examples of user services are an Apache Web server or a database. From the user…"/>
<link rel="prev" href="cha-ha-ycluster.html" title="Chapter 4. Using the YaST Cluster Module"/><link rel="next" href="cha-ha-config-basics.html" title="Chapter 5. Configuration and Administration Basics"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15/xml/book_sle_ha_guide.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-config.html">Configuration and Administration</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title"><em class="citetitle">Administration Guide</em></div><ol><li><a href="pre-ha.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-install.html" class="has-children "><span class="title-number">I </span><span class="title-name">Installation and Setup</span></a><ol><li><a href="cha-ha-concepts.html" class=" "><span class="title-number">1 </span><span class="title-name">Product Overview</span></a></li><li><a href="cha-ha-requirements.html" class=" "><span class="title-number">2 </span><span class="title-name">System Requirements and Recommendations</span></a></li><li><a href="cha-ha-install.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing the High Availability Extension</span></a></li><li><a href="cha-ha-ycluster.html" class=" "><span class="title-number">4 </span><span class="title-name">Using the YaST Cluster Module</span></a></li></ol></li><li class="active"><a href="part-config.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Configuration and Administration</span></a><ol><li><a href="cha-ha-config-basics.html" class=" "><span class="title-number">5 </span><span class="title-name">Configuration and Administration Basics</span></a></li><li><a href="cha-conf-hawk2.html" class=" "><span class="title-number">6 </span><span class="title-name">Configuring and Managing Cluster Resources with Hawk2</span></a></li><li><a href="cha-ha-manual-config.html" class=" "><span class="title-number">7 </span><span class="title-name">Configuring and Managing Cluster Resources (Command Line)</span></a></li><li><a href="sec-ha-config-basics-remote.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing Services on Remote Hosts</span></a></li><li><a href="cha-ha-agents.html" class=" "><span class="title-number">9 </span><span class="title-name">Adding or Modifying Resource Agents</span></a></li><li><a href="cha-ha-monitor-clusters.html" class=" "><span class="title-number">10 </span><span class="title-name">Monitoring Clusters</span></a></li><li><a href="cha-ha-fencing.html" class=" "><span class="title-number">11 </span><span class="title-name">Fencing and STONITH</span></a></li><li><a href="cha-ha-storage-protect.html" class=" "><span class="title-number">12 </span><span class="title-name">Storage Protection and SBD</span></a></li><li><a href="cha-ha-qdevice.html" class=" "><span class="title-number">13 </span><span class="title-name">QDevice and QNetd</span></a></li><li><a href="cha-ha-acl.html" class=" "><span class="title-number">14 </span><span class="title-name">Access Control Lists</span></a></li><li><a href="cha-ha-netbonding.html" class=" "><span class="title-number">15 </span><span class="title-name">Network Device Bonding</span></a></li><li><a href="cha-ha-lb.html" class=" "><span class="title-number">16 </span><span class="title-name">Load Balancing</span></a></li><li><a href="cha-ha-geo.html" class=" "><span class="title-number">17 </span><span class="title-name">Geo Clusters (Multi-Site Clusters)</span></a></li></ol></li><li><a href="part-storage.html" class="has-children "><span class="title-number">III </span><span class="title-name">Storage and Data Replication</span></a><ol><li><a href="cha-ha-storage-dlm.html" class=" "><span class="title-number">18 </span><span class="title-name">Distributed Lock Manager (DLM)</span></a></li><li><a href="cha-ha-ocfs2.html" class=" "><span class="title-number">19 </span><span class="title-name">OCFS2</span></a></li><li><a href="cha-ha-gfs2.html" class=" "><span class="title-number">20 </span><span class="title-name">GFS2</span></a></li><li><a href="cha-ha-drbd.html" class=" "><span class="title-number">21 </span><span class="title-name">DRBD</span></a></li><li><a href="cha-ha-clvm.html" class=" "><span class="title-number">22 </span><span class="title-name">Cluster Logical Volume Manager (Cluster LVM)</span></a></li><li><a href="cha-ha-cluster-md.html" class=" "><span class="title-number">23 </span><span class="title-name">Cluster Multi-device (Cluster MD)</span></a></li><li><a href="cha-ha-samba.html" class=" "><span class="title-number">24 </span><span class="title-name">Samba Clustering</span></a></li><li><a href="cha-ha-rear.html" class=" "><span class="title-number">25 </span><span class="title-name">Disaster Recovery with ReaR (Relax-and-Recover)</span></a></li></ol></li><li><a href="part-maintenance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Maintenance and Upgrade</span></a><ol><li><a href="cha-ha-maintenance.html" class=" "><span class="title-number">26 </span><span class="title-name">Executing Maintenance Tasks</span></a></li><li><a href="cha-ha-migration.html" class=" "><span class="title-number">27 </span><span class="title-name">Upgrading Your Cluster and Updating Software Packages</span></a></li></ol></li><li><a href="part-appendix.html" class="has-children "><span class="title-number">V </span><span class="title-name">Appendix</span></a><ol><li><a href="app-ha-troubleshooting.html" class=" "><span class="title-number">A </span><span class="title-name">Troubleshooting</span></a></li><li><a href="app-naming.html" class=" "><span class="title-number">B </span><span class="title-name">Naming Conventions</span></a></li><li><a href="app-ha-management.html" class=" "><span class="title-number">C </span><span class="title-name">Cluster Management Tools (Command Line)</span></a></li><li><a href="app-crmreport-nonroot.html" class=" "><span class="title-number">D </span><span class="title-name">Running Cluster Reports Without <code class="systemitem">root</code> Access</span></a></li></ol></li><li><a href="gl-heartb.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk02ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><div class="part" id="part-config" data-id-title="Configuration and Administration"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Linux Enterprise High Availability Extension</span> <span class="productnumber">15</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">Part II </span><span class="title-name">Configuration and Administration </span></span><a title="Permalink" class="permalink" href="part-config.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15/xml/book_sle_ha_guide.xml" title="Edit source document"> </a></div></div></div></div></div><div class="toc"><ul><li><span class="chapter"><a href="cha-ha-config-basics.html"><span class="title-number">5 </span><span class="title-name">Configuration and Administration Basics</span></a></span></li><dd class="toc-abstract"><p>
    The main purpose of an HA cluster is to manage user services. Typical
    examples of user services are an Apache Web server or a database. From
    the user's point of view, the services do something specific when
    ordered to do so. To the cluster, however, they are only resources which
    may be started or stopped—the nature of the service is
    irrelevant to the cluster.
   </p><p>
    In this chapter, we will introduce some basic concepts you need to know
    when configuring resources and administering your cluster. The following
    chapters show you how to execute the main configuration and
    administration tasks with each of the management tools the High Availability Extension
    provides.
   </p></dd><li><span class="chapter"><a href="cha-conf-hawk2.html"><span class="title-number">6 </span><span class="title-name">Configuring and Managing Cluster Resources with Hawk2</span></a></span></li><dd class="toc-abstract"><p>
    To configure and manage cluster resources, either use Hawk2, or
    the crm shell (crmsh) command line utility. If you upgrade from an
    earlier version of SUSE® Linux Enterprise High Availability Extension where Hawk was installed, the package
    will be replaced with the current version, Hawk2.
   </p><p>
    Hawk2's user-friendly Web interface allows you to monitor and administer
    your High Availability clusters from Linux or non-Linux machines alike. Hawk2 can be
    accessed from any machine inside or outside of the cluster by using a
    (graphical) Web browser.
   </p></dd><li><span class="chapter"><a href="cha-ha-manual-config.html"><span class="title-number">7 </span><span class="title-name">Configuring and Managing Cluster Resources (Command Line)</span></a></span></li><dd class="toc-abstract"><p>
    To configure and manage cluster resources, either use the crm shell
    (crmsh) command line utility or Hawk2, a Web-based
    user interface.
   </p><p>
    This chapter introduces <code class="command">crm</code>, the command line tool
    and covers an overview of this tool, how to use templates, and mainly
    configuring and managing cluster resources: creating basic and advanced
    types of resources (groups and clones), configuring constraints,
    specifying failover nodes and failback nodes, configuring resource
    monitoring, starting, cleaning up or removing resources, and migrating
    resources manually.
   </p></dd><li><span class="chapter"><a href="sec-ha-config-basics-remote.html"><span class="title-number">8 </span><span class="title-name">Managing Services on Remote Hosts</span></a></span></li><dd class="toc-abstract"><p>
    The possibilities for monitoring and managing services on remote hosts
    has become increasingly important during the last few years.
    SUSE Linux Enterprise High Availability Extension 11 SP3 offered fine-grained monitoring of services on
    remote hosts via monitoring plug-ins. The recent addition of the
    <code class="literal">pacemaker_remote</code> service now allows SUSE Linux Enterprise High Availability Extension
    15 to fully manage and monitor resources on remote hosts
    just as if they were a real cluster node—without the need to
    install the cluster stack on the remote machines.
   </p></dd><li><span class="chapter"><a href="cha-ha-agents.html"><span class="title-number">9 </span><span class="title-name">Adding or Modifying Resource Agents</span></a></span></li><dd class="toc-abstract"><p>
    All tasks that need to be managed by a cluster must be available as a
    resource. There are two major groups here to consider: resource agents
    and STONITH agents. For both categories, you can add your own
    agents, extending the abilities of the cluster to your own needs.
   </p></dd><li><span class="chapter"><a href="cha-ha-monitor-clusters.html"><span class="title-number">10 </span><span class="title-name">Monitoring Clusters</span></a></span></li><dd class="toc-abstract"><p>
    This chapter describes how to monitor a cluster's health and view its history.
   </p></dd><li><span class="chapter"><a href="cha-ha-fencing.html"><span class="title-number">11 </span><span class="title-name">Fencing and STONITH</span></a></span></li><dd class="toc-abstract"><p>
    Fencing is a very important concept in computer clusters for HA (High
    Availability). A cluster sometimes detects that one of the nodes is
    behaving strangely and needs to remove it. This is called
    <span class="emphasis"><em>fencing</em></span> and is commonly done with a STONITH
    resource. Fencing may be defined as a method to bring an HA cluster to a
    known state.
   </p><p>
    Every resource in a cluster has a state attached. For example:
    <span class="quote">“<span class="quote">resource r1 is started on alice</span>”</span>. In an HA cluster, such
    a state implies that <span class="quote">“<span class="quote">resource r1 is stopped on all nodes except
    alice</span>”</span>, because the cluster must make sure that every resource
    may be started on only one node. Every node must report every change
    that happens to a resource. The cluster state is thus a collection of
    resource states and node states.
   </p><p>
    When the state of a node or resource cannot be established with
    certainty, fencing comes in. Even when the cluster is not aware of what
    is happening on a given node, fencing can ensure that the node does not
    run any important resources.
   </p></dd><li><span class="chapter"><a href="cha-ha-storage-protect.html"><span class="title-number">12 </span><span class="title-name">Storage Protection and SBD</span></a></span></li><dd class="toc-abstract"><p>
    SBD (STONITH Block Device) provides a node fencing mechanism for
    Pacemaker-based clusters through the exchange of messages via shared block
    storage (SAN, iSCSI, FCoE, etc.). This isolates the fencing
    mechanism from changes in firmware version or dependencies on specific
    firmware controllers. SBD needs a watchdog on each node to ensure that misbehaving
    nodes are really stopped. Under certain conditions, it is also possible to use
    SBD without shared storage, by running it in diskless mode.
   </p><p>
    The <span class="package">ha-cluster-bootstrap</span> scripts provide an automated
    way to set up a cluster with the option of using SBD as fencing mechanism.
    For details, see the <span class="intraxref">Article “<em class="citetitle">Installation and Setup Quick Start</em>”</span>. However,
    manually setting up SBD provides you with more options regarding the
    individual settings.
   </p><p>
    This chapter explains the concepts behind SBD. It guides you through
    configuring the components needed by SBD to protect your cluster from
    potential data corruption in case of a split brain scenario.
   </p><p>
    In addition to node level fencing, you can use additional mechanisms for storage
    protection, such as LVM2 exclusive activation or OCFS2 file locking support
    (resource level fencing). They protect your system against administrative or
    application faults.
   </p></dd><li><span class="chapter"><a href="cha-ha-qdevice.html"><span class="title-number">13 </span><span class="title-name">QDevice and QNetd</span></a></span></li><dd class="toc-abstract"><p>
            QDevice and QNetd participate in quorum decisions. With
            assistance from the arbitrator <code class="systemitem">corosync-qnetd</code>,
            <code class="systemitem">corosync-qdevice</code> provides
            a configurable number of votes, allowing a cluster to sustain
            more node failures than the standard quorum rules allow. We
            recommend deploying <code class="systemitem">corosync-qnetd</code>
            and <code class="systemitem">corosync-qdevice</code> for
            clusters with an even number of nodes, and especially for two-node clusters.
         </p></dd><li><span class="chapter"><a href="cha-ha-acl.html"><span class="title-number">14 </span><span class="title-name">Access Control Lists</span></a></span></li><dd class="toc-abstract"><p>
    The cluster administration tools like crm shell (crmsh) or
    Hawk2 can be used by <code class="systemitem">root</code> or any user in the group
    <code class="systemitem">haclient</code>. By default, these
    users have full read/write access. To limit access or assign more
    fine-grained access rights, you can use <span class="emphasis"><em>Access control
    lists</em></span> (ACLs).
   </p><p>
    Access control lists consist of an ordered set of access rules. Each
    rule allows read or write access or denies access to a part of the
    cluster configuration. Rules are typically combined to produce a
    specific role, then users may be assigned to a role that matches their
    tasks.
   </p></dd><li><span class="chapter"><a href="cha-ha-netbonding.html"><span class="title-number">15 </span><span class="title-name">Network Device Bonding</span></a></span></li><dd class="toc-abstract"><p>
   For many systems, it is desirable to implement network connections that
   comply to more than the standard data security or availability
   requirements of a typical Ethernet device. In these cases, several
   Ethernet devices can be aggregated to a single bonding device.
   </p></dd><li><span class="chapter"><a href="cha-ha-lb.html"><span class="title-number">16 </span><span class="title-name">Load Balancing</span></a></span></li><dd class="toc-abstract"><p>
  <span class="emphasis"><em>Load Balancing</em></span> makes a cluster of servers appear as
  one large, fast server to outside clients. This apparent single server is
  called a <span class="emphasis"><em>virtual server</em></span>. It consists of one or more
  load balancers dispatching incoming requests and several real servers
  running the actual services. With a load balancing setup of High Availability Extension, you
  can build highly scalable and highly available network services, such as
  Web, cache, mail, FTP, media and VoIP services.
 </p></dd><li><span class="chapter"><a href="cha-ha-geo.html"><span class="title-number">17 </span><span class="title-name">Geo Clusters (Multi-Site Clusters)</span></a></span></li><dd class="toc-abstract"><p>
    Apart from local clusters and metro area clusters, SUSE® Linux Enterprise High Availability Extension
    15 also supports geographically dispersed clusters (Geo
    clusters, sometimes also called multi-site clusters). That means you can
    have multiple, geographically dispersed sites with a local cluster each.
    Failover between these clusters is coordinated by a higher level entity,
    the so-called <code class="literal">booth</code>. For details on how to
    use and set up Geo clusters, refer to <span class="intraxref">Article “<em class="citetitle">Geo Clustering Quick Start</em>”</span> and
   <span class="intraxref">Book “<em class="citetitle">Geo Clustering Guide</em>”</span>.
    </p></dd></ul></div></div><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ha-ycluster.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 4 </span>Using the YaST Cluster Module</span></a> </div><div><a class="pagination-link next" href="cha-ha-config-basics.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Configuration and Administration Basics</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2023</span></div></div></footer></body></html>