<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLE HA 15 SP2 | Administration Guide | OCFS2</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="OCFS2 | SLE HA 15 SP2"/>
<meta name="description" content="Oracle Cluster File System 2 (OCFS2) is a general-purp…"/>
<meta name="product-name" content="SUSE Linux Enterprise High Availability"/>
<meta name="product-number" content="15 SP2"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 20. OCFS2"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise High Availability Extension 15 SP2"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="OCFS2 | SLE HA 15 SP2"/>
<meta property="og:description" content="Oracle Cluster File System 2 (OCFS2) is a general-purpose journaling file system that has been fully integrated since the Li…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OCFS2 | SLE HA 15 SP2"/>
<meta name="twitter:description" content="Oracle Cluster File System 2 (OCFS2) is a general-purpose journaling file system that has been fully integrated since the Li…"/>
<link rel="prev" href="cha-ha-storage-dlm.html" title="Chapter 19. Distributed Lock Manager (DLM)"/><link rel="next" href="cha-ha-gfs2.html" title="Chapter 21. GFS2"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-storage.html">Storage and Data Replication</a><span> / </span><a class="crumb" href="cha-ha-ocfs2.html">OCFS2</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="pre-ha.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-install.html" class="has-children "><span class="title-number">I </span><span class="title-name">Installation and Setup</span></a><ol><li><a href="cha-ha-concepts.html" class=" "><span class="title-number">1 </span><span class="title-name">Product Overview</span></a></li><li><a href="cha-ha-requirements.html" class=" "><span class="title-number">2 </span><span class="title-name">System Requirements and Recommendations</span></a></li><li><a href="cha-ha-install.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing SUSE Linux Enterprise High Availability</span></a></li><li><a href="cha-ha-ycluster.html" class=" "><span class="title-number">4 </span><span class="title-name">Using the YaST Cluster Module</span></a></li></ol></li><li><a href="part-config.html" class="has-children "><span class="title-number">II </span><span class="title-name">Configuration and Administration</span></a><ol><li><a href="cha-ha-config-basics.html" class=" "><span class="title-number">5 </span><span class="title-name">Configuration and Administration Basics</span></a></li><li><a href="sec-ha-config-basics-resources.html" class=" "><span class="title-number">6 </span><span class="title-name">Configuring Cluster Resources</span></a></li><li><a href="sec-ha-config-basics-constraints.html" class=" "><span class="title-number">7 </span><span class="title-name">Configuring Resource Constraints</span></a></li><li><a href="cha-ha-manage-resources.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing Cluster Resources</span></a></li><li><a href="sec-ha-config-basics-remote.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing Services on Remote Hosts</span></a></li><li><a href="cha-ha-agents.html" class=" "><span class="title-number">10 </span><span class="title-name">Adding or Modifying Resource Agents</span></a></li><li><a href="cha-ha-monitor-clusters.html" class=" "><span class="title-number">11 </span><span class="title-name">Monitoring Clusters</span></a></li><li><a href="cha-ha-fencing.html" class=" "><span class="title-number">12 </span><span class="title-name">Fencing and STONITH</span></a></li><li><a href="cha-ha-storage-protect.html" class=" "><span class="title-number">13 </span><span class="title-name">Storage Protection and SBD</span></a></li><li><a href="cha-ha-qdevice.html" class=" "><span class="title-number">14 </span><span class="title-name">QDevice and QNetd</span></a></li><li><a href="cha-ha-acl.html" class=" "><span class="title-number">15 </span><span class="title-name">Access Control Lists</span></a></li><li><a href="cha-ha-netbonding.html" class=" "><span class="title-number">16 </span><span class="title-name">Network Device Bonding</span></a></li><li><a href="cha-ha-lb.html" class=" "><span class="title-number">17 </span><span class="title-name">Load Balancing</span></a></li><li><a href="cha-ha-geo.html" class=" "><span class="title-number">18 </span><span class="title-name">Geo Clusters (Multi-Site Clusters)</span></a></li></ol></li><li class="active"><a href="part-storage.html" class="has-children you-are-here"><span class="title-number">III </span><span class="title-name">Storage and Data Replication</span></a><ol><li><a href="cha-ha-storage-dlm.html" class=" "><span class="title-number">19 </span><span class="title-name">Distributed Lock Manager (DLM)</span></a></li><li><a href="cha-ha-ocfs2.html" class=" you-are-here"><span class="title-number">20 </span><span class="title-name">OCFS2</span></a></li><li><a href="cha-ha-gfs2.html" class=" "><span class="title-number">21 </span><span class="title-name">GFS2</span></a></li><li><a href="cha-ha-drbd.html" class=" "><span class="title-number">22 </span><span class="title-name">DRBD</span></a></li><li><a href="cha-ha-clvm.html" class=" "><span class="title-number">23 </span><span class="title-name">Cluster Logical Volume Manager (Cluster LVM)</span></a></li><li><a href="cha-ha-cluster-md.html" class=" "><span class="title-number">24 </span><span class="title-name">Cluster Multi-device (Cluster MD)</span></a></li><li><a href="cha-ha-samba.html" class=" "><span class="title-number">25 </span><span class="title-name">Samba Clustering</span></a></li><li><a href="cha-ha-rear.html" class=" "><span class="title-number">26 </span><span class="title-name">Disaster Recovery with ReaR (Relax-and-Recover)</span></a></li></ol></li><li><a href="part-maintenance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Maintenance and Upgrade</span></a><ol><li><a href="cha-ha-maintenance.html" class=" "><span class="title-number">27 </span><span class="title-name">Executing Maintenance Tasks</span></a></li><li><a href="cha-ha-migration.html" class=" "><span class="title-number">28 </span><span class="title-name">Upgrading Your Cluster and Updating Software Packages</span></a></li></ol></li><li><a href="part-appendix.html" class="has-children "><span class="title-number">V </span><span class="title-name">Appendix</span></a><ol><li><a href="app-ha-troubleshooting.html" class=" "><span class="title-number">A </span><span class="title-name">Troubleshooting</span></a></li><li><a href="app-naming.html" class=" "><span class="title-number">B </span><span class="title-name">Naming Conventions</span></a></li><li><a href="app-ha-management.html" class=" "><span class="title-number">C </span><span class="title-name">Cluster Management Tools (Command Line)</span></a></li><li><a href="app-crmreport-nonroot.html" class=" "><span class="title-number">D </span><span class="title-name">Running Cluster Reports Without <code class="systemitem">root</code> Access</span></a></li></ol></li><li><a href="gl-heartb.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk02ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-ha-ocfs2" data-id-title="OCFS2"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Linux Enterprise High Availability</span> <span class="productnumber">15 SP2</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">20 </span><span class="title-name">OCFS2</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Oracle Cluster File System 2 (OCFS2) is a general-purpose journaling
    file system that has been fully integrated since the Linux 2.6 Kernel.
    OCFS2 allows you to store application binary files, data files, and
    databases on devices on shared storage. All nodes in a cluster have
    concurrent read and write access to the file system. A user space
    control daemon, managed via a clone resource, provides the integration
    with the HA stack, in particular with Corosync and the Distributed
    Lock Manager (DLM).
   </p></div></div></div></div><section class="sect1" id="sec-ha-ocfs2-features" data-id-title="Features and Benefits"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.1 </span><span class="title-name">Features and Benefits</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-features">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   OCFS2 can be used for the following storage solutions for example:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     General applications and workloads.
    </p></li><li class="listitem"><p>
     Xen image store in a cluster. Xen virtual machines and
     virtual servers can be stored on OCFS2 volumes that are mounted by
     cluster servers. This provides quick and easy portability of Xen
     virtual machines between servers.
    </p></li><li class="listitem"><p>
     LAMP (Linux, Apache, MySQL, and PHP | Perl |
     Python) stacks.
    </p></li></ul></div><p>
   As a high-performance, symmetric and parallel cluster file system,
   OCFS2 supports the following functions:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     An application's files are available to all nodes in the cluster. Users
     simply install it once on an OCFS2 volume in the cluster.
    </p></li><li class="listitem"><p>
     All nodes can concurrently read and write directly to storage via the
     standard file system interface, enabling easy management of
     applications that run across the cluster.
    </p></li><li class="listitem"><p>
     File access is coordinated through DLM. DLM control is good for most
     cases, but an application's design might limit scalability if it
     contends with the DLM to coordinate file access.
    </p></li><li class="listitem"><p>
     Storage backup functionality is available on all back-end storage. An
     image of the shared application files can be easily created, which can
     help provide effective disaster recovery.
    </p></li></ul></div><p>
   OCFS2 also provides the following capabilities:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Metadata caching.
    </p></li><li class="listitem"><p>
     Metadata journaling.
    </p></li><li class="listitem"><p>
     Cross-node file data consistency.
    </p></li><li class="listitem"><p>
     Support for multiple-block sizes up to 4 KB, cluster sizes up to 1 MB,
     for a maximum volume size of 4 PB (Petabyte).
    </p></li><li class="listitem"><p>
     Support for up to 32 cluster nodes.
    </p></li><li class="listitem"><p>
     Asynchronous and direct I/O support for database files for improved
     database performance.
    </p></li></ul></div><div id="id-1.4.5.4.3.8" data-id-title="Support for OCFS2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Support for OCFS2</div><p>
    OCFS2 is only supported by SUSE when used with the pcmk (Pacemaker) stack,
    as provided by SUSE Linux Enterprise High Availability. SUSE does not provide support for OCFS2 in
    combination with the o2cb stack.
   </p></div></section><section class="sect1" id="sec-ha-ocfs2-utils" data-id-title="OCFS2 Packages and Management Utilities"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.2 </span><span class="title-name">OCFS2 Packages and Management Utilities</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-utils">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The OCFS2 Kernel module (<code class="literal">ocfs2</code>) is installed
   automatically in SUSE Linux Enterprise High Availability 15 SP2. To use
   OCFS2, make sure the following packages are installed on each node in
   the cluster: <span class="package">ocfs2-tools</span> and
   the matching <span class="package">ocfs2-kmp-*</span>
   packages for your Kernel.
  </p><p>
   The <span class="package">ocfs2-tools</span> package
   provides the following utilities for management of OFS2 volumes. For
   syntax information, see their man pages.
  </p><div class="table" id="id-1.4.5.4.4.4" data-id-title="OCFS2 Utilities"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 20.1: </span><span class="title-name">OCFS2 Utilities </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#id-1.4.5.4.4.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        OCFS2 Utility
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        debugfs.ocfs2
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Examines the state of the OCFS file system for debugging.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        fsck.ocfs2
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Checks the file system for errors and optionally repairs errors.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        mkfs.ocfs2
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Creates an OCFS2 file system on a device, usually a partition on
        a shared physical or logical disk.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        mounted.ocfs2
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Detects and lists all OCFS2 volumes on a clustered system.
        Detects and lists all nodes on the system that have mounted an
        OCFS2 device or lists all OCFS2 devices.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        tunefs.ocfs2
       </p>
      </td><td>
       <p>
        Changes OCFS2 file system parameters, including the volume
        label, number of node slots, journal size for all node slots, and
        volume size.
       </p>
      </td></tr></tbody></table></div></div></section><section class="sect1" id="sec-ha-ocfs2-create-service" data-id-title="Configuring OCFS2 Services and a STONITH Resource"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.3 </span><span class="title-name">Configuring OCFS2 Services and a STONITH Resource</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-create-service">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Before you can create OCFS2 volumes, you must configure the following
   resources as services in the cluster: DLM and a STONITH resource.
  </p><p>
   The following procedure uses the <code class="command">crm</code> shell to
   configure the cluster resources. Alternatively, you can also use
   Hawk2 to configure the resources as described in
   <a class="xref" href="cha-ha-ocfs2.html#sec-ha-ocfs2-rsc-hawk2" title="20.6. Configuring OCFS2 Resources With Hawk2">Section 20.6, “Configuring OCFS2 Resources With Hawk2”</a>.
  </p><div class="procedure" id="pro-ocfs2-stonith" data-id-title="Configuring a STONITH Resource"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.1: </span><span class="title-name">Configuring a STONITH Resource </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ocfs2-stonith">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><div id="id-1.4.5.4.5.4.2" data-id-title="STONITH Device Needed" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: STONITH Device Needed</div><p>
     You need to configure a fencing device. Without a STONITH
     mechanism (like <code class="literal">external/sbd</code>) in place the
     configuration will fail.
    </p></div><ol class="procedure" type="1"><li class="step"><p>
     Start a shell and log in as <code class="systemitem">root</code> or equivalent.
    </p></li><li class="step"><p>
     Create an SBD partition as described in
     <a class="xref" href="cha-ha-storage-protect.html#pro-ha-storage-protect-sbd-create" title="Initializing the SBD Devices">Procedure 13.3, “Initializing the SBD Devices”</a>.
    </p></li><li class="step"><p>
     Run <code class="command">crm</code> <code class="option">configure</code>.
    </p></li><li class="step"><p>
     Configure <code class="literal">external/sbd</code> as the fencing device:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive</code> sbd_stonith stonith:external/sbd \
  params pcmk_delay_max=30 meta target-role="Started"</pre></div></li><li class="step"><p>
     Review your changes with <code class="command">show</code>.
    </p></li><li class="step"><p>
     If everything is correct, submit your changes with
     <code class="command">commit</code> and leave the crm live configuration with
     <code class="command">quit</code>.
    </p></li></ol></div></div><p>
    For details on configuring the resource for DLM, see <a class="xref" href="cha-ha-storage-dlm.html#sec-ha-storage-generic-dlm-config" title="19.2. Configuring DLM Cluster Resources">Section 19.2, “Configuring DLM Cluster Resources”</a>.
  </p></section><section class="sect1" id="sec-ha-ocfs2-create" data-id-title="Creating OCFS2 Volumes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.4 </span><span class="title-name">Creating OCFS2 Volumes</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-create">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After you have configured a DLM cluster resource as described in
   <a class="xref" href="cha-ha-ocfs2.html#sec-ha-ocfs2-create-service" title="20.3. Configuring OCFS2 Services and a STONITH Resource">Section 20.3, “Configuring OCFS2 Services and a STONITH Resource”</a>, configure your system to
   use OCFS2 and create OCFs2 volumes.
  </p><div id="id-1.4.5.4.6.3" data-id-title="OCFS2 Volumes for Application and Data Files" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: OCFS2 Volumes for Application and Data Files</div><p>
    We recommend that you generally store application files and data files
    on different OCFS2 volumes. If your application volumes and data
    volumes have different requirements for mounting, it is mandatory to
    store them on different volumes.
   </p></div><p>
   Before you begin, prepare the block devices you plan to use for your
   OCFS2 volumes. Leave the devices as free space.
  </p><p>
   Then create and format the OCFS2 volume with the
   <code class="command">mkfs.ocfs2</code> as described in
   <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-volume" title="Creating and Formatting an OCFS2 Volume">Procedure 20.2, “Creating and Formatting an OCFS2 Volume”</a>. The most important parameters for the
   command are listed in <a class="xref" href="cha-ha-ocfs2.html#tab-ha-ofcs2-mkfs-ocfs2-params" title="Important OCFS2 Parameters">Table 20.2, “Important OCFS2 Parameters”</a>.
   For more information and the command syntax, refer to the
   <code class="command">mkfs.ocfs2</code> man page.
  </p><div class="table" id="tab-ha-ofcs2-mkfs-ocfs2-params" data-id-title="Important OCFS2 Parameters"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 20.2: </span><span class="title-name">Important OCFS2 Parameters </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#tab-ha-ofcs2-mkfs-ocfs2-params">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        OCFS2 Parameter
       </p>
      </th><th style="border-bottom: 1px solid ; ">
       <p>
        Description and Recommendation
       </p>
      </th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Volume Label (<code class="option">-L</code>)
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        A descriptive name for the volume to make it uniquely identifiable
        when it is mounted on different nodes. Use the
        <code class="command">tunefs.ocfs2</code> utility to modify the label as
        needed.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Cluster Size (<code class="option">-C</code>)
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        Cluster size is the smallest unit of space allocated to a file to
        hold the data. For the available options and recommendations, refer
        to the <code class="command">mkfs.ocfs2</code> man page.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Number of Node Slots (<code class="option">-N</code>)
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The maximum number of nodes that can concurrently mount a volume.
        For each of the nodes, OCFS2 creates separate system files, such
        as the journals. Nodes that access the volume
        can be a combination of little-endian architectures (such as AMD64/Intel 64)
        and big-endian architectures (such as S/390x).
       </p>
       <p>
        Node-specific files are called local files. A node slot
        number is appended to the local file. For example:
        <code class="literal">journal:0000</code> belongs to whatever node is assigned
        to slot number <code class="literal">0</code>.
       </p>
       <p>
        Set each volume's maximum number of node slots when you create it,
        according to how many nodes that you expect to concurrently mount
        the volume. Use the <code class="command">tunefs.ocfs2</code> utility to
        increase the number of node slots as needed. Note that the value
        cannot be decreased, and one node slot will consume about 100 MiB disk space.
       </p>
       <p>
        In case the <code class="option">-N</code> parameter is not specified, the
        number of node slots is decided based on the size of the file system.
        For the default value, refer to the <code class="command">mkfs.ocfs2</code> man page.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Block Size (<code class="option">-b</code>)
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        The smallest unit of space addressable by the file system. Specify
        the block size when you create the volume. For the available options
        and recommendations, refer to the <code class="command">mkfs.ocfs2</code> man
        page.

       </p>
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Specific Features On/Off (<code class="option">--fs-features</code>)
       </p>
      </td><td style="border-bottom: 1px solid ; ">
       <p>
        A comma separated list of feature flags can be provided, and
        <code class="systemitem">mkfs.ocfs2</code> will try to create the file
        system with those features set according to the list. To turn a
        feature on, include it in the list. To turn a feature off, prepend
        <code class="literal">no</code> to the name.
       </p>
       <p>
        For an overview of all available flags, refer to the
        <code class="command">mkfs.ocfs2</code> man page.
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        Pre-Defined Features (<code class="option">--fs-feature-level</code>)
       </p>
      </td><td>
       <p>
        Allows you to choose from a set of pre-determined file system
        features. For the available options, refer to the
        <code class="command">mkfs.ocfs2</code> man page.
       </p>
      </td></tr></tbody></table></div></div><p>
   If you do not specify any features when creating and formatting
   the volume with <code class="command">mkfs.ocfs2</code>, the following features are
   enabled by default: <code class="option">backup-super</code>,
   <code class="option">sparse</code>, <code class="option">inline-data</code>,
   <code class="option">unwritten</code>, <code class="option">metaecc</code>,
   <code class="option">indexed-dirs</code>, and <code class="option">xattr</code>.
  </p><div class="procedure" id="pro-ocfs2-volume" data-id-title="Creating and Formatting an OCFS2 Volume"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.2: </span><span class="title-name">Creating and Formatting an OCFS2 Volume </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ocfs2-volume">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    Execute the following steps only on <span class="emphasis"><em>one</em></span> of the
    cluster nodes.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Open a terminal window and log in as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Check if the cluster is online with the command <code class="command">crm
     status</code>.
    </p></li><li class="step"><p>
     Create and format the volume using the <code class="command">mkfs.ocfs2</code>
     utility. For information about the syntax for this command, refer to
     the <code class="command">mkfs.ocfs2</code> man page.
    </p><p>
     For example, to create a new OCFS2 file system
     that supports up to 32 cluster nodes,
     enter the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkfs.ocfs2 -N 32 /dev/disk/by-id/<em class="replaceable">DEVICE_ID</em></code></pre></div><p>
      Always use a stable device name (for example:
      <code class="filename">/dev/disk/by-id/scsi-ST2000DM001-0123456_Wabcdefg</code>).
    </p></li></ol></div></div></section><section class="sect1" id="sec-ha-ocfs2-mount" data-id-title="Mounting OCFS2 Volumes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.5 </span><span class="title-name">Mounting OCFS2 Volumes</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-mount">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can either mount an OCFS2 volume manually or with the cluster
   manager, as described in <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-mount-cluster" title="Mounting an OCFS2 Volume with the Cluster Resource Manager">Procedure 20.4, “Mounting an OCFS2 Volume with the Cluster Resource Manager”</a>.
  </p><p>
   To mount multiple OCFS2 volumes, see <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-mount-multiple" title="Mounting multiple OCFS2 volumes with the cluster resource manager">Procedure 20.5, “Mounting multiple OCFS2 volumes with the cluster resource manager”</a>.
  </p><div class="procedure" id="pro-ocfs2-mount-manual" data-id-title="Manually Mounting an OCFS2 Volume"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.3: </span><span class="title-name">Manually Mounting an OCFS2 Volume </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ocfs2-mount-manual">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open a terminal window and log in as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Check if the cluster is online with the command <code class="command">crm
     status</code>.
    </p></li><li class="step"><p>
     Mount the volume from the command line, using the
     <code class="command">mount</code> command.
    </p></li></ol></div></div><div id="id-1.4.5.4.7.5" data-id-title="Manually Mounted OCFS2 Devices" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Manually Mounted OCFS2 Devices</div><p>
    If you mount the OCFS2 file system manually for testing purposes,
    make sure to unmount it again before starting to use it by means of
    cluster resources.
   </p></div><div class="procedure" id="pro-ocfs2-mount-cluster" data-id-title="Mounting an OCFS2 Volume with the Cluster Resource Manager"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.4: </span><span class="title-name">Mounting an OCFS2 Volume with the Cluster Resource Manager </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ocfs2-mount-cluster">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    To mount an OCFS2 volume with the High Availability software, configure an
    OCFS2 file system resource in the cluster. The following procedure uses
    the <code class="command">crm</code> shell to configure the cluster resources.
    Alternatively, you can also use Hawk2 to configure the resources as
    described in <a class="xref" href="cha-ha-ocfs2.html#sec-ha-ocfs2-rsc-hawk2" title="20.6. Configuring OCFS2 Resources With Hawk2">Section 20.6, “Configuring OCFS2 Resources With Hawk2”</a>.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Log in to a node as <code class="systemitem">root</code> or equivalent.
    </p></li><li class="step"><p>
     Run <code class="command">crm configure</code>.
    </p></li><li class="step"><p>
     Configure Pacemaker to mount the OCFS2 file system on every node in
     the cluster:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive</code> ocfs2-1 ocf:heartbeat:Filesystem \
  params device="/dev/disk/by-id/<em class="replaceable">DEVICE_ID</em>" directory="/mnt/shared" fstype="ocfs2" \
  op monitor interval="20" timeout="40" \
  op start timeout="60" op stop timeout="60" \
  meta target-role="Started"</pre></div></li><li class="step"><p>
     Add the <code class="literal">ocfs2-1</code> primitive
     to the <code class="literal">g-storage</code> group you created in
     <a class="xref" href="cha-ha-storage-dlm.html#pro-dlm-resources" title="Configuring a Base Group for DLM">Procedure 19.1, “Configuring a Base Group for DLM”</a>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">modgroup</code> g-storage add ocfs2-1</pre></div><p>
     Because of the base group's internal colocation and ordering,
     the <code class="systemitem">ocfs2-1</code> resource will only start
     on nodes that also have a <code class="literal">dlm</code> resource already running.
    </p><div id="id-1.4.5.4.7.6.6.4" data-id-title="Do not use a group for multiple OCFS2 resources" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Do not use a group for multiple OCFS2 resources</div><p>
      Adding multiple OCFS2 resources to a group creates a dependency between
      the OCFS2 volumes. For example, if you created a group with
      <code class="command">crm configure group g-storage dlm ocfs2-1 ocfs2-2</code>,
      then stopping <code class="literal">ocfs2-1</code> will also stop
      <code class="literal">ocfs2-2</code>, and starting <code class="literal">ocfs2-2</code>
      will also start <code class="literal">ocfs2-1</code>.
     </p><p>
      To use multiple OCFS2 resources in the cluster, use colocation and order
      constraints as described in <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-mount-multiple" title="Mounting multiple OCFS2 volumes with the cluster resource manager">Procedure 20.5, “Mounting multiple OCFS2 volumes with the cluster resource manager”</a>.
     </p></div></li><li class="step"><p>
     Review your changes with <code class="command">show</code>.
    </p></li><li class="step"><p>
     If everything is correct, submit your changes with
     <code class="command">commit</code> and leave the crm live configuration with
     <code class="command">quit</code>.
    </p></li></ol></div></div><div class="procedure" id="pro-ocfs2-mount-multiple" data-id-title="Mounting multiple OCFS2 volumes with the cluster resource manager"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.5: </span><span class="title-name">Mounting multiple OCFS2 volumes with the cluster resource manager </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ocfs2-mount-multiple">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    To mount multiple OCFS2 volumes in the cluster, configure an OCFS2 file system
    resource for each volume, and colocate them with the <code class="literal">dlm</code>
    resource you created in <a class="xref" href="cha-ha-storage-dlm.html#pro-dlm-multiple-resources" title="Configuring an independent DLM resource">Procedure 19.2, “Configuring an independent DLM resource”</a>.
   </p><div id="id-1.4.5.4.7.7.3" class="admonition important compact"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><p>
     Do <span class="emphasis"><em>not</em></span> add multiple OCFS2 resources to a group with DLM.
     This creates a dependency between the OCFS2 volumes. For example, if
     <code class="literal">ocfs2-1</code> and <code class="literal">ocfs2-2</code> are in the same group,
     then stopping <code class="literal">ocfs2-1</code> will also stop <code class="literal">ocfs2-2</code>.
    </p></div><ol class="procedure" type="1"><li class="step"><p>
     Log in to a node as <code class="systemitem">root</code> or equivalent.
    </p></li><li class="step"><p>
     Run <code class="command">crm configure</code>.
    </p></li><li class="step"><p>
     Create the primitive for the first OCFS2 volume:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive</code> ocfs2-1 Filesystem \
  params directory="/srv/ocfs2-1" fstype=ocfs2 device="/dev/disk/by-id/<em class="replaceable">DEVICE_ID1</em>" \
  op monitor interval=20 timeout=40 \
  op start timeout=60 interval=0 \
  op stop timeout=60 interval=0</pre></div></li><li class="step"><p>
     Create the primitive for the second OCFS2 volume:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive</code> ocfs2-2 Filesystem \
  params directory="/srv/ocfs2-2" fstype=ocfs2 device="/dev/disk/by-id/<em class="replaceable">DEVICE_ID2</em>" \
  op monitor interval=20 timeout=40 \
  op start timeout=60 interval=0 \
  op stop timeout=60 interval=0</pre></div></li><li class="step"><p>
     Clone the OCFS2 resources so that they can run on all nodes:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">clone</code> cl-ocfs2-1 ocfs2-1 meta interleave=true
<code class="prompt custom">crm(live)configure# </code><code class="command">clone</code> cl-ocfs2-2 ocfs2-2 meta interleave=true</pre></div></li><li class="step"><p>
     Add a colocation constraint for both OCFS2 resources so that they can only
     run on nodes where DLM is also running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">colocation</code> co-ocfs2-with-dlm inf: ( cl-ocfs2-1 cl-ocfs2-2 ) cl-dlm</pre></div></li><li class="step"><p>
     Add an order constraint for both OCFS2 resources so that they can only
     start after DLM is already running:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">order</code> o-dlm-before-ocfs2 Mandatory: cl-dlm ( cl-ocfs2-1 cl-ocfs2-2 )</pre></div></li><li class="step"><p>
     Review your changes with <code class="command">show</code>.
    </p></li><li class="step"><p>
     If everything is correct, submit your changes with <code class="command">commit</code>
     and leave the crm live configuration with <code class="command">quit</code>.
    </p></li></ol></div></div></section><section class="sect1" id="sec-ha-ocfs2-rsc-hawk2" data-id-title="Configuring OCFS2 Resources With Hawk2"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.6 </span><span class="title-name">Configuring OCFS2 Resources With Hawk2</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-rsc-hawk2">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Instead of configuring the DLM and the file system resource for OCFS2
   manually with the crm shell, you can also use the OCFS2 template
   in Hawk2's <span class="guimenu">Setup Wizard</span>.
  </p><div id="id-1.4.5.4.8.3" data-id-title="Differences Between Manual Configuration and Hawk2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Differences Between Manual Configuration and Hawk2</div><p>
    The OCFS2 template in the <span class="guimenu">Setup Wizard</span> does
    <span class="emphasis"><em>not</em></span> include the configuration of a STONITH
    resource. If you use the wizard, you still need to create an SBD
    partition on the shared storage and configure a STONITH resource as
    described in <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-stonith" title="Configuring a STONITH Resource">Procedure 20.1, “Configuring a STONITH Resource”</a>.
   </p><p>
    Using the OCFS2 template in the Hawk2 <span class="guimenu">Setup
    Wizard</span> also leads to a slightly different resource
    configuration than the manual configuration described in
    <a class="xref" href="cha-ha-storage-dlm.html#pro-dlm-resources" title="Configuring a Base Group for DLM">Procedure 19.1, “Configuring a Base Group for DLM”</a> and
    <a class="xref" href="cha-ha-ocfs2.html#pro-ocfs2-mount-cluster" title="Mounting an OCFS2 Volume with the Cluster Resource Manager">Procedure 20.4, “Mounting an OCFS2 Volume with the Cluster Resource Manager”</a>.
   </p></div><div class="procedure" id="pro-ha-ocfs2-rsc-hawk" data-id-title="Configuring OCFS2 Resources with Hawk2s Wizard"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 20.6: </span><span class="title-name">Configuring OCFS2 Resources with Hawk2's <span class="guimenu">Wizard</span> </span></span><a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#pro-ha-ocfs2-rsc-hawk">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Log in to Hawk2:
    </p><div class="verbatim-wrap"><pre class="screen">https://<em class="replaceable">HAWKSERVER</em>:7630/</pre></div></li><li class="step"><p>
     In the left navigation bar, select <span class="guimenu">Wizard</span>.
    </p></li><li class="step"><p>
     Expand the <span class="guimenu">File System</span> category and select
     <code class="literal">OCFS2 File System</code>.
    </p></li><li class="step"><p>
     Follow the instructions on the screen. If you need information about an
     option, click it to display a short help text in Hawk2. After the last
     configuration step, <span class="guimenu">Verify</span> the values you have entered.
    </p><p>
     The wizard displays the configuration snippet that will be applied to
     the CIB and any additional changes, if required.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/hawk2-wizard-ocfs2-verify.png"><img src="images/hawk2-wizard-ocfs2-verify.png" width="70%" alt="Image" title="Image"/></a></div></div></li><li class="step"><p>
     Check the proposed changes. If everything is according to your wishes,
     apply the changes.
    </p><p>
     A message on the screen shows if the action has been successful.
    </p></li></ol></div></div></section><section class="sect1" id="sec-ha-ocfs2-quota" data-id-title="Using Quotas on OCFS2 File Systems"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.7 </span><span class="title-name">Using Quotas on OCFS2 File Systems</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-quota">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To use quotas on an OCFS2 file system, create and mount the files
   system with the appropriate quota features or mount options,
   respectively: <code class="literal">ursquota</code> (quota for individual users) or
   <code class="literal">grpquota</code> (quota for groups). These features can also
   be enabled later on an unmounted file system using
   <code class="command">tunefs.ocfs2</code>.
  </p><p>
   When a file system has the appropriate quota feature enabled, it tracks
   in its metadata how much space and files each user (or group) uses. Since
   OCFS2 treats quota information as file system-internal metadata, you
   do not need to run the <code class="command">quotacheck</code>(8) program. All
   functionality is built into fsck.ocfs2 and the file system driver itself.
  </p><p>
   To enable enforcement of limits imposed on each user or group, run
   <code class="command">quotaon</code>(8) like you would do for any other file
   system.
  </p><p>
   For performance reasons each cluster node performs quota accounting
   locally and synchronizes this information with a common central storage
   once per 10 seconds. This interval is tuneable with
   <code class="command">tunefs.ocfs2</code>, options
   <code class="option">usrquota-sync-interval</code> and
   <code class="option">grpquota-sync-interval</code>. Therefore quota information may
   not be exact at all times and as a consequence users or groups can
   slightly exceed their quota limit when operating on several cluster nodes
   in parallel.
  </p></section><section class="sect1" id="sec-ha-ocfs2-more" data-id-title="For More Information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20.8 </span><span class="title-name">For More Information</span></span> <a title="Permalink" class="permalink" href="cha-ha-ocfs2.html#sec-ha-ocfs2-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/maintenance/SLEHA15SP2/xml/ha_ocfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For more information about OCFS2, see the following links:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.5.4.10.3.1"><span class="term"><a class="link" href="https://ocfs2.wiki.kernel.org/" target="_blank">https://ocfs2.wiki.kernel.org/</a>
    </span></dt><dd><p>
      The OCFS2 project home page.
     </p></dd><dt id="id-1.4.5.4.10.3.2"><span class="term"><a class="link" href="http://oss.oracle.com/projects/ocfs2/" target="_blank">http://oss.oracle.com/projects/ocfs2/</a>
    </span></dt><dd><p>
      The former OCFS2 project home page at Oracle.
     </p></dd><dt id="id-1.4.5.4.10.3.3"><span class="term"><a class="link" href="http://oss.oracle.com/projects/ocfs2/documentation" target="_blank">http://oss.oracle.com/projects/ocfs2/documentation</a>
    </span></dt><dd><p>
      The project's former documentation home page.
     </p></dd></dl></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ha-storage-dlm.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 19 </span>Distributed Lock Manager (DLM)</span></a> </div><div><a class="pagination-link next" href="cha-ha-gfs2.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 21 </span>GFS2</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-features"><span class="title-number">20.1 </span><span class="title-name">Features and Benefits</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-utils"><span class="title-number">20.2 </span><span class="title-name">OCFS2 Packages and Management Utilities</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-create-service"><span class="title-number">20.3 </span><span class="title-name">Configuring OCFS2 Services and a STONITH Resource</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-create"><span class="title-number">20.4 </span><span class="title-name">Creating OCFS2 Volumes</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-mount"><span class="title-number">20.5 </span><span class="title-name">Mounting OCFS2 Volumes</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-rsc-hawk2"><span class="title-number">20.6 </span><span class="title-name">Configuring OCFS2 Resources With Hawk2</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-quota"><span class="title-number">20.7 </span><span class="title-name">Using Quotas on OCFS2 File Systems</span></a></span></li><li><span class="sect1"><a href="cha-ha-ocfs2.html#sec-ha-ocfs2-more"><span class="title-number">20.8 </span><span class="title-name">For More Information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>