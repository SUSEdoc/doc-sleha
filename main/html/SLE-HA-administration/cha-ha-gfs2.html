<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLE HA 15 SP6 | Administration Guide | GFS2</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="GFS2 | SLE HA 15 SP6"/>
<meta name="description" content="Global File System 2 or GFS2 is a shared disk file sys…"/>
<meta name="product-name" content="SUSE Linux Enterprise High Availability"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 22. GFS2"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise High Availability Extension 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="GFS2 | SLE HA 15 SP6"/>
<meta property="og:description" content="Global File System 2 or GFS2 is a shared disk file system for Linux computer clusters. GFS2 allows all nodes to have direct …"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="GFS2 | SLE HA 15 SP6"/>
<meta name="twitter:description" content="Global File System 2 or GFS2 is a shared disk file system for Linux computer clusters. GFS2 allows all nodes to have direct …"/>
<link rel="prev" href="cha-ha-ocfs2.html" title="Chapter 21. OCFS2"/><link rel="next" href="cha-ha-drbd.html" title="Chapter 23. DRBD"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-storage.html">Storage and data replication</a><span> / </span><a class="crumb" href="cha-ha-gfs2.html">GFS2</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="pre-ha.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="part-install.html" class="has-children "><span class="title-number">I </span><span class="title-name">Installation and setup</span></a><ol><li><a href="cha-ha-concepts.html" class=" "><span class="title-number">1 </span><span class="title-name">Product overview</span></a></li><li><a href="cha-ha-requirements.html" class=" "><span class="title-number">2 </span><span class="title-name">System requirements and recommendations</span></a></li><li><a href="cha-ha-install.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing SUSE Linux Enterprise High Availability</span></a></li><li><a href="cha-ha-ycluster.html" class=" "><span class="title-number">4 </span><span class="title-name">Using the YaST cluster module</span></a></li></ol></li><li><a href="part-config.html" class="has-children "><span class="title-number">II </span><span class="title-name">Configuration and administration</span></a><ol><li><a href="cha-ha-config-basics.html" class=" "><span class="title-number">5 </span><span class="title-name">Configuration and administration basics</span></a></li><li><a href="sec-ha-config-basics-resources.html" class=" "><span class="title-number">6 </span><span class="title-name">Configuring cluster resources</span></a></li><li><a href="sec-ha-config-basics-constraints.html" class=" "><span class="title-number">7 </span><span class="title-name">Configuring resource constraints</span></a></li><li><a href="cha-ha-manage-resources.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing cluster resources</span></a></li><li><a href="sec-ha-config-basics-remote.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing services on remote hosts</span></a></li><li><a href="cha-ha-agents.html" class=" "><span class="title-number">10 </span><span class="title-name">Adding or modifying resource agents</span></a></li><li><a href="cha-ha-monitor-clusters.html" class=" "><span class="title-number">11 </span><span class="title-name">Monitoring clusters</span></a></li><li><a href="cha-ha-fencing.html" class=" "><span class="title-number">12 </span><span class="title-name">Fencing and STONITH</span></a></li><li><a href="cha-ha-storage-protect.html" class=" "><span class="title-number">13 </span><span class="title-name">Storage protection and SBD</span></a></li><li><a href="cha-ha-qdevice.html" class=" "><span class="title-number">14 </span><span class="title-name">QDevice and QNetd</span></a></li><li><a href="cha-ha-acl.html" class=" "><span class="title-number">15 </span><span class="title-name">Access control lists</span></a></li><li><a href="cha-ha-netbonding.html" class=" "><span class="title-number">16 </span><span class="title-name">Network device bonding</span></a></li><li><a href="cha-ha-lb.html" class=" "><span class="title-number">17 </span><span class="title-name">Load balancing</span></a></li><li><a href="cha-ha-virtualization.html" class=" "><span class="title-number">18 </span><span class="title-name">High Availability for virtualization</span></a></li><li><a href="cha-ha-geo.html" class=" "><span class="title-number">19 </span><span class="title-name">Geo clusters (multi-site clusters)</span></a></li></ol></li><li class="active"><a href="part-storage.html" class="has-children you-are-here"><span class="title-number">III </span><span class="title-name">Storage and data replication</span></a><ol><li><a href="cha-ha-storage-dlm.html" class=" "><span class="title-number">20 </span><span class="title-name">Distributed Lock Manager (DLM)</span></a></li><li><a href="cha-ha-ocfs2.html" class=" "><span class="title-number">21 </span><span class="title-name">OCFS2</span></a></li><li><a href="cha-ha-gfs2.html" class=" you-are-here"><span class="title-number">22 </span><span class="title-name">GFS2</span></a></li><li><a href="cha-ha-drbd.html" class=" "><span class="title-number">23 </span><span class="title-name">DRBD</span></a></li><li><a href="cha-ha-clvm.html" class=" "><span class="title-number">24 </span><span class="title-name">Cluster logical volume manager (Cluster LVM)</span></a></li><li><a href="cha-ha-cluster-md.html" class=" "><span class="title-number">25 </span><span class="title-name">Cluster multi-device (Cluster MD)</span></a></li><li><a href="cha-ha-samba.html" class=" "><span class="title-number">26 </span><span class="title-name">Samba clustering</span></a></li><li><a href="cha-ha-rear.html" class=" "><span class="title-number">27 </span><span class="title-name">Disaster recovery with ReaR (Relax-and-Recover)</span></a></li></ol></li><li><a href="part-maintenance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Maintenance and upgrade</span></a><ol><li><a href="cha-ha-maintenance.html" class=" "><span class="title-number">28 </span><span class="title-name">Executing maintenance tasks</span></a></li><li><a href="cha-ha-migration.html" class=" "><span class="title-number">29 </span><span class="title-name">Upgrading your cluster and updating software packages</span></a></li></ol></li><li><a href="part-appendix.html" class="has-children "><span class="title-number">V </span><span class="title-name">Appendix</span></a><ol><li><a href="app-ha-troubleshooting.html" class=" "><span class="title-number">A </span><span class="title-name">Troubleshooting</span></a></li><li><a href="app-naming.html" class=" "><span class="title-number">B </span><span class="title-name">Naming conventions</span></a></li><li><a href="app-ha-management.html" class=" "><span class="title-number">C </span><span class="title-name">Cluster management tools (command line)</span></a></li><li><a href="app-crmreport-nonroot.html" class=" "><span class="title-number">D </span><span class="title-name">Running cluster reports without <code class="systemitem">root</code> access</span></a></li></ol></li><li><a href="gl-heartb.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk02ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-ha-gfs2" data-id-title="GFS2"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Linux Enterprise High Availability</span> <span class="productnumber">15 SP6</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">22 </span><span class="title-name">GFS2</span></span> <a title="Permalink" class="permalink" href="cha-ha-gfs2.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
    Global File System 2 or GFS2 is a shared disk file system for Linux
    computer clusters. GFS2 allows all nodes to have direct concurrent
    access to the same shared block storage. GFS2 has no disconnected
    operating-mode, and no client or server roles. All nodes in a GFS2
    cluster function as peers. GFS2 supports up to 32 cluster nodes. Using
    GFS2 in a cluster requires hardware to allow access to the shared
    storage, and a lock manager to control access to the storage.
   </p><p>
    SUSE recommends OCFS2 over GFS2 for your cluster environments if
    performance is one of your major requirements. Our tests have revealed
    that OCFS2 performs better as compared to GFS2 in such settings.
   </p></div></div></div></div><div id="id-1.4.5.5.3" data-id-title="GFS2 support" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: GFS2 support</div><p>
      SUSE only supports GFS2 in read-only mode. Write operations are not supported.
     </p></div><section class="sect1" id="sec-ha-gfs2-utils" data-id-title="GFS2 packages and management utilities"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.1 </span><span class="title-name">GFS2 packages and management utilities</span></span> <a title="Permalink" class="permalink" href="cha-ha-gfs2.html#sec-ha-gfs2-utils">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To use GFS2, make sure
   <span class="package">gfs2-utils</span> and a matching
   <span class="package">gfs2-kmp-*</span> package for your
   Kernel is installed on each node of the cluster.
  </p><p>
   The <span class="package">gfs2-utils</span> package provides
   the following utilities for management of GFS2 volumes. For syntax
   information, see their man pages.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.5.5.4.4.1"><span class="term">fsck.gfs2</span></dt><dd><p>
      Checks the file system for errors and optionally repairs errors.
     </p></dd><dt id="id-1.4.5.5.4.4.2"><span class="term">gfs2_jadd</span></dt><dd><p>
      Adds additional journals to a GFS2 file system.
     </p></dd><dt id="id-1.4.5.5.4.4.3"><span class="term">gfs2_grow</span></dt><dd><p>
      Grow a GFS2 file system.
     </p></dd><dt id="id-1.4.5.5.4.4.4"><span class="term">mkfs.gfs2</span></dt><dd><p>
      Create a GFS2 file system on a device, usually a shared device or
      partition.
     </p></dd><dt id="id-1.4.5.5.4.4.5"><span class="term">tunegfs2</span></dt><dd><p>
      Allows viewing and manipulating the GFS2 file system parameters such
      as <code class="varname">UUID</code>, <code class="varname">label</code>,
      <code class="varname">lockproto</code> and <code class="varname">locktable</code>.
     </p></dd></dl></div></section><section class="sect1" id="sec-ha-gfs2-create-service" data-id-title="Configuring GFS2 services and a STONITH resource"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.2 </span><span class="title-name">Configuring GFS2 services and a STONITH resource</span></span> <a title="Permalink" class="permalink" href="cha-ha-gfs2.html#sec-ha-gfs2-create-service">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Before you can create GFS2 volumes, you must configure DLM and a
   STONITH resource.
  </p><div class="procedure" id="pro-gfs2-stonith" data-id-title="Configuring a STONITH resource"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 22.1: </span><span class="title-name">Configuring a STONITH resource </span></span><a title="Permalink" class="permalink" href="cha-ha-gfs2.html#pro-gfs2-stonith">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><div id="id-1.4.5.5.5.3.2" data-id-title="STONITH device needed" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: STONITH device needed</div><p>
     You need to configure a fencing device. Without a STONITH
     mechanism (like <code class="literal">external/sbd</code>) in place the
     configuration will fail.
    </p></div><ol class="procedure" type="1"><li class="step"><p>
     Start a shell and log in as <code class="systemitem">root</code> or equivalent.
    </p></li><li class="step"><p>
     Create an SBD partition as described in
     <a class="xref" href="cha-ha-storage-protect.html#pro-ha-storage-protect-sbd-create" title="Initializing the SBD devices">Procedure 13.3, “Initializing the SBD devices”</a>.
    </p></li><li class="step"><p>
     Run <code class="command">crm configure</code>.
    </p></li><li class="step"><p>
     Configure <code class="literal">external/sbd</code> as the fencing device:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive sbd_stonith stonith:external/sbd \
    params pcmk_delay_max=30 meta target-role="Started"</code></pre></div></li><li class="step"><p>
     Review your changes with <code class="command">show</code>.
    </p></li><li class="step"><p>
     If everything is correct, submit your changes with
     <code class="command">commit</code> and leave the crm live configuration with
     <code class="command">quit</code>.
    </p></li></ol></div></div><p>
    For details on configuring the resource for DLM, see <a class="xref" href="cha-ha-storage-dlm.html#sec-ha-storage-generic-dlm-config" title="20.2. Configuring DLM cluster resources">Section 20.2, “Configuring DLM cluster resources”</a>.
  </p></section><section class="sect1" id="sec-ha-gfs2-create" data-id-title="Creating GFS2 volumes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.3 </span><span class="title-name">Creating GFS2 volumes</span></span> <a title="Permalink" class="permalink" href="cha-ha-gfs2.html#sec-ha-gfs2-create">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   After you have configured DLM as cluster resources as described in
   <a class="xref" href="cha-ha-gfs2.html#sec-ha-gfs2-create-service" title="22.2. Configuring GFS2 services and a STONITH resource">Section 22.2, “Configuring GFS2 services and a STONITH resource”</a>, configure your system to
   use GFS2 and create GFS2 volumes.
  </p><div id="id-1.4.5.5.6.3" data-id-title="GFS2 volumes for application and data files" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: GFS2 volumes for application and data files</div><p>
    We recommend that you generally store application files and data files
    on different GFS2 volumes. If your application volumes and data volumes
    have different requirements for mounting, it is mandatory to store them
    on different volumes.
   </p></div><p>
   Before you begin, prepare the block devices you plan to use for your GFS2
   volumes. Leave the devices as free space.
  </p><p>
   Then create and format the GFS2 volume with the
   <code class="command">mkfs.gfs2</code> as described in
   <a class="xref" href="cha-ha-gfs2.html#pro-gfs2-volume" title="Creating and formatting a GFS2 volume">Procedure 22.2, “Creating and formatting a GFS2 volume”</a>. The most important parameters for the
   command are listed below. For
   more information and the command syntax, refer to the
   <code class="command">mkfs.gfs2</code> man page.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.5.5.6.6.1"><span class="term">Lock Protocol Name (<code class="option">-p</code>)</span></dt><dd><p>
      The name of the locking protocol to use. Acceptable locking
      protocols are lock_dlm (for shared storage) or, if you are using GFS2
      as a local file system (1 node only), you can specify the
      lock_nolock protocol. If this option is not specified, lock_dlm
      protocol is assumed.
     </p></dd><dt id="id-1.4.5.5.6.6.2"><span class="term">Lock Table Name (<code class="option">-t</code>)</span></dt><dd><p>
      The lock table field appropriate to the lock module you are using. It is
      <em class="replaceable">clustername</em>:<em class="replaceable">fsname</em>.
      The <em class="replaceable">clustername</em> value must match that in the
      cluster configuration file, <code class="filename">/etc/corosync/corosync.conf</code>. Only members of this
      cluster are permitted to use this file system.
      The <em class="replaceable">fsname</em> value is a unique file system name used
      to distinguish this GFS2 file system from others created (1 to 16 characters).
     </p></dd><dt id="id-1.4.5.5.6.6.3"><span class="term">Number of Journals (<code class="option">-j</code>)</span></dt><dd><p>
      The number of journals for gfs2_mkfs to create. You need at least
      one journal per machine that will mount the file system. If this
      option is not specified, one journal is created.
     </p></dd></dl></div><div class="procedure" id="pro-gfs2-volume" data-id-title="Creating and formatting a GFS2 volume"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 22.2: </span><span class="title-name">Creating and formatting a GFS2 volume </span></span><a title="Permalink" class="permalink" href="cha-ha-gfs2.html#pro-gfs2-volume">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    Execute the following steps only on <span class="emphasis"><em>one</em></span> of the
    cluster nodes.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Open a terminal window and log in as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Check if the cluster is online with the command <code class="command">crm
     status</code>.
    </p></li><li class="step"><p>
     Create and format the volume using the <code class="command">mkfs.gfs2</code>
     utility. For information about the syntax for this command, refer to
     the <code class="command">mkfs.gfs2</code> man page.
    </p><p>
     For example, to create a new GFS2 file system
     that supports up to 32 cluster nodes,
     use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">mkfs.gfs2 -t hacluster:mygfs2 -p lock_dlm -j 32 /dev/disk/by-id/<em class="replaceable">DEVICE_ID</em></code></pre></div><p>
     The <code class="systemitem">hacluster</code> name relates to
     the entry <code class="option">cluster_name</code> in the file
     <code class="filename">/etc/corosync/corosync.conf</code> (this is the default).
    </p><p>
      Always use a stable device name (for example:
      <code class="filename">/dev/disk/by-id/scsi-ST2000DM001-0123456_Wabcdefg</code>).
    </p></li></ol></div></div></section><section class="sect1" id="sec-ha-gfs2-mount" data-id-title="Mounting GFS2 volumes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22.4 </span><span class="title-name">Mounting GFS2 volumes</span></span> <a title="Permalink" class="permalink" href="cha-ha-gfs2.html#sec-ha-gfs2-mount">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   You can either mount a GFS2 volume manually or with the cluster manager,
   as described in <a class="xref" href="cha-ha-gfs2.html#pro-gfs2-mount-cluster" title="Mounting a GFS2 volume with the cluster manager">Procedure 22.4, “Mounting a GFS2 volume with the cluster manager”</a>.
  </p><div class="procedure" id="pro-gfs2-mount-manual" data-id-title="Manually mounting a GFS2 volume"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 22.3: </span><span class="title-name">Manually mounting a GFS2 volume </span></span><a title="Permalink" class="permalink" href="cha-ha-gfs2.html#pro-gfs2-mount-manual">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Open a terminal window and log in as <code class="systemitem">root</code>.
    </p></li><li class="step"><p>
     Check if the cluster is online with the command <code class="command">crm
     status</code>.
    </p></li><li class="step"><p>
     Mount the volume from the command line, using the
     <code class="command">mount</code> command.
    </p></li></ol></div></div><div id="id-1.4.5.5.7.4" data-id-title="Manually mounted GFS2 devices" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning: Manually mounted GFS2 devices</div><p>
    If you mount the GFS2 file system manually for testing purposes, make
    sure to unmount it again before starting to use it via cluster resources.
   </p></div><div class="procedure" id="pro-gfs2-mount-cluster" data-id-title="Mounting a GFS2 volume with the cluster manager"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 22.4: </span><span class="title-name">Mounting a GFS2 volume with the cluster manager </span></span><a title="Permalink" class="permalink" href="cha-ha-gfs2.html#pro-gfs2-mount-cluster">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_gfs2.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    To mount a GFS2 volume with the High Availability software, configure an OCF file
    system resource in the cluster. The following procedure uses the
    <code class="command">crm</code> shell to configure the cluster resources.
    Alternatively, you can also use Hawk2 to configure the resources.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Start a shell and log in as <code class="systemitem">root</code> or equivalent.
    </p></li><li class="step"><p>
     Run <code class="command">crm configure</code>.
    </p></li><li class="step"><p>
     Configure Pacemaker to mount the GFS2 file system on every node in the
     cluster:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">primitive gfs2-1 ocf:heartbeat:Filesystem \
  params device="/dev/disk/by-id/<em class="replaceable">DEVICE_ID</em>" directory="/mnt/shared" fstype="gfs2" \
  op monitor interval="20" timeout="40" \
  op start timeout="60" op stop timeout="60" \
  meta target-role="Stopped"</code></pre></div></li><li class="step"><p>
     Add the <code class="literal">gfs2-1</code> primitive
     to the <code class="literal">g-storage</code> group you created in
     <a class="xref" href="cha-ha-storage-dlm.html#pro-dlm-resources" title="Configuring a base group for DLM">Procedure 20.1, “Configuring a base group for DLM”</a>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt custom">crm(live)configure# </code><code class="command">modgroup g-storage add gfs2-1</code></pre></div><p>
     Because of the base group's internal colocation and ordering,
     the <code class="systemitem">gfs2-1</code> resource will only start
     on nodes that also have a <code class="literal">dlm</code> resource already running.
    </p></li><li class="step"><p>
     Review your changes with <code class="command">show</code>.
    </p></li><li class="step"><p>
     If everything is correct, submit your changes with
     <code class="command">commit</code> and leave the crm live configuration with
     <code class="command">quit</code>.
    </p></li></ol></div></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ha-ocfs2.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 21 </span>OCFS2</span></a> </div><div><a class="pagination-link next" href="cha-ha-drbd.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 23 </span>DRBD</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-ha-gfs2.html#sec-ha-gfs2-utils"><span class="title-number">22.1 </span><span class="title-name">GFS2 packages and management utilities</span></a></span></li><li><span class="sect1"><a href="cha-ha-gfs2.html#sec-ha-gfs2-create-service"><span class="title-number">22.2 </span><span class="title-name">Configuring GFS2 services and a STONITH resource</span></a></span></li><li><span class="sect1"><a href="cha-ha-gfs2.html#sec-ha-gfs2-create"><span class="title-number">22.3 </span><span class="title-name">Creating GFS2 volumes</span></a></span></li><li><span class="sect1"><a href="cha-ha-gfs2.html#sec-ha-gfs2-mount"><span class="title-number">22.4 </span><span class="title-name">Mounting GFS2 volumes</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>