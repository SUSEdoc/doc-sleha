<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLE HA 15 SP6 | Administration Guide | Network device bonding</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Network device bonding | SLE HA 15 SP6"/>
<meta name="description" content="For many systems, it is desirable to implement network…"/>
<meta name="product-name" content="SUSE Linux Enterprise High Availability"/>
<meta name="product-number" content="15 SP6"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 16. Network device bonding"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="PUBLIC SUSE Linux Enterprise High Availability Extension 15 SP6"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Network device bonding | SLE HA 15 SP6"/>
<meta property="og:description" content="For many systems, it is desirable to implement network connections that comply to more than the standard data security or av…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Network device bonding | SLE HA 15 SP6"/>
<meta name="twitter:description" content="For many systems, it is desirable to implement network connections that comply to more than the standard data security or av…"/>
<link rel="prev" href="cha-ha-acl.html" title="Chapter 15. Access control lists"/><link rel="next" href="cha-ha-lb.html" title="Chapter 17. Load balancing"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-config.html">Configuration and administration</a><span> / </span><a class="crumb" href="cha-ha-netbonding.html">Network device bonding</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="pre-ha.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="part-install.html" class="has-children "><span class="title-number">I </span><span class="title-name">Installation and setup</span></a><ol><li><a href="cha-ha-concepts.html" class=" "><span class="title-number">1 </span><span class="title-name">Product overview</span></a></li><li><a href="cha-ha-requirements.html" class=" "><span class="title-number">2 </span><span class="title-name">System requirements and recommendations</span></a></li><li><a href="cha-ha-install.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing SUSE Linux Enterprise High Availability</span></a></li><li><a href="cha-ha-ycluster.html" class=" "><span class="title-number">4 </span><span class="title-name">Using the YaST cluster module</span></a></li></ol></li><li class="active"><a href="part-config.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Configuration and administration</span></a><ol><li><a href="cha-ha-config-basics.html" class=" "><span class="title-number">5 </span><span class="title-name">Configuration and administration basics</span></a></li><li><a href="sec-ha-config-basics-resources.html" class=" "><span class="title-number">6 </span><span class="title-name">Configuring cluster resources</span></a></li><li><a href="sec-ha-config-basics-constraints.html" class=" "><span class="title-number">7 </span><span class="title-name">Configuring resource constraints</span></a></li><li><a href="cha-ha-manage-resources.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing cluster resources</span></a></li><li><a href="sec-ha-config-basics-remote.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing services on remote hosts</span></a></li><li><a href="cha-ha-agents.html" class=" "><span class="title-number">10 </span><span class="title-name">Adding or modifying resource agents</span></a></li><li><a href="cha-ha-monitor-clusters.html" class=" "><span class="title-number">11 </span><span class="title-name">Monitoring clusters</span></a></li><li><a href="cha-ha-fencing.html" class=" "><span class="title-number">12 </span><span class="title-name">Fencing and STONITH</span></a></li><li><a href="cha-ha-storage-protect.html" class=" "><span class="title-number">13 </span><span class="title-name">Storage protection and SBD</span></a></li><li><a href="cha-ha-qdevice.html" class=" "><span class="title-number">14 </span><span class="title-name">QDevice and QNetd</span></a></li><li><a href="cha-ha-acl.html" class=" "><span class="title-number">15 </span><span class="title-name">Access control lists</span></a></li><li><a href="cha-ha-netbonding.html" class=" you-are-here"><span class="title-number">16 </span><span class="title-name">Network device bonding</span></a></li><li><a href="cha-ha-lb.html" class=" "><span class="title-number">17 </span><span class="title-name">Load balancing</span></a></li><li><a href="cha-ha-virtualization.html" class=" "><span class="title-number">18 </span><span class="title-name">High Availability for virtualization</span></a></li><li><a href="cha-ha-geo.html" class=" "><span class="title-number">19 </span><span class="title-name">Geo clusters (multi-site clusters)</span></a></li></ol></li><li><a href="part-storage.html" class="has-children "><span class="title-number">III </span><span class="title-name">Storage and data replication</span></a><ol><li><a href="cha-ha-storage-dlm.html" class=" "><span class="title-number">20 </span><span class="title-name">Distributed Lock Manager (DLM)</span></a></li><li><a href="cha-ha-ocfs2.html" class=" "><span class="title-number">21 </span><span class="title-name">OCFS2</span></a></li><li><a href="cha-ha-gfs2.html" class=" "><span class="title-number">22 </span><span class="title-name">GFS2</span></a></li><li><a href="cha-ha-drbd.html" class=" "><span class="title-number">23 </span><span class="title-name">DRBD</span></a></li><li><a href="cha-ha-clvm.html" class=" "><span class="title-number">24 </span><span class="title-name">Cluster logical volume manager (Cluster LVM)</span></a></li><li><a href="cha-ha-cluster-md.html" class=" "><span class="title-number">25 </span><span class="title-name">Cluster multi-device (Cluster MD)</span></a></li><li><a href="cha-ha-samba.html" class=" "><span class="title-number">26 </span><span class="title-name">Samba clustering</span></a></li><li><a href="cha-ha-rear.html" class=" "><span class="title-number">27 </span><span class="title-name">Disaster recovery with ReaR (Relax-and-Recover)</span></a></li></ol></li><li><a href="part-maintenance.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Maintenance and upgrade</span></a><ol><li><a href="cha-ha-maintenance.html" class=" "><span class="title-number">28 </span><span class="title-name">Executing maintenance tasks</span></a></li><li><a href="cha-ha-migration.html" class=" "><span class="title-number">29 </span><span class="title-name">Upgrading your cluster and updating software packages</span></a></li></ol></li><li><a href="part-appendix.html" class="has-children "><span class="title-number">V </span><span class="title-name">Appendix</span></a><ol><li><a href="app-ha-troubleshooting.html" class=" "><span class="title-number">A </span><span class="title-name">Troubleshooting</span></a></li><li><a href="app-naming.html" class=" "><span class="title-number">B </span><span class="title-name">Naming conventions</span></a></li><li><a href="app-ha-management.html" class=" "><span class="title-number">C </span><span class="title-name">Cluster management tools (command line)</span></a></li><li><a href="app-crmreport-nonroot.html" class=" "><span class="title-number">D </span><span class="title-name">Running cluster reports without <code class="systemitem">root</code> access</span></a></li></ol></li><li><a href="gl-heartb.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk02ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-ha-netbonding" data-id-title="Network device bonding"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Linux Enterprise High Availability</span> <span class="productnumber">15 SP6</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">16 </span><span class="title-name">Network device bonding</span></span> <a title="Permalink" class="permalink" href="cha-ha-netbonding.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml" title="Edit source document"> </a></div></div></div><div><div class="abstract"><p>
   For many systems, it is desirable to implement network connections that
   comply to more than the standard data security or availability
   requirements of a typical Ethernet device. In these cases, several
   Ethernet devices can be aggregated to a single bonding device.
   </p></div></div></div></div><p>
  The configuration of the bonding device is done by bonding module
  options. The behavior is determined through the mode of the bonding
  device. By default, this is <code class="systemitem">mode=active-backup</code>,
  which means that a different device becomes active if the primary
  device fails.
 </p><p>
  When using Corosync, the bonding device is not managed by the cluster
  software. Therefore, the bonding device must be configured on every cluster
  node that might need to access the bonding device.
 </p><section class="sect1" id="sec-ha-netbond-yast" data-id-title="Configuring bonding devices with YaST"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16.1 </span><span class="title-name">Configuring bonding devices with YaST</span></span> <a title="Permalink" class="permalink" href="cha-ha-netbonding.html#sec-ha-netbond-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To configure a bonding device, you need to have multiple Ethernet devices
   that can be aggregated to a single bonding device. Proceed as follows:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Start YaST as <code class="systemitem">root</code> and select <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
    </p></li><li class="step"><p>
     In the <span class="guimenu">Network Settings</span>, switch to the
     <span class="guimenu">Overview</span> tab, which shows the available devices.
    </p></li><li class="step"><p>
     Check if the Ethernet devices to be aggregate to a bonding device have
     an IP address assigned. If yes, change it:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Select the device to change and click <span class="guimenu">Edit</span>.
      </p></li><li class="step" id="step-bond-slave"><p>
       In the <span class="guimenu">Address</span> tab of the <span class="guimenu">Network Card
       Setup</span> dialog that opens, select the option <span class="guimenu">No Link
       and IP Setup (Bond Ports)</span>.
      </p></li><li class="step"><p>
       Click <span class="guimenu">Next</span> to return to the
       <span class="guimenu">Overview</span> tab in the <span class="guimenu">Network
       Settings</span> dialog.
      </p></li></ol></li><li class="step"><p>
     To add a new bonding device:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Click <span class="guimenu">Add</span> and set the <span class="guimenu">Device
       Type</span> to <span class="guimenu">Bond</span>. Proceed with
       <span class="guimenu">Next</span>.
      </p></li><li class="step"><p>
       Select how to assign the IP address to the bonding device. Three
       methods are at your disposal:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         No Link and IP Setup (Bond Ports)
        </p></li><li class="listitem"><p>
         Dynamic Address (with DHCP or Zeroconf)
        </p></li><li class="listitem"><p>
         Statically assigned IP Address
        </p></li></ul></div><p>
       Use the method that is appropriate for your environment. If
       Corosync manages virtual IP addresses, select
       <span class="guimenu">Statically assigned IP Address</span> and assign an IP
       address to the interface.
      </p></li><li class="step"><p>
       Switch to the <span class="guimenu">Bond Ports</span> tab.
      </p></li><li class="step"><p>
       To select the Ethernet devices that you want to include into the
       bond, activate the check box in front of the respective devices.
      </p></li><li class="step"><p>
       Edit the <span class="guimenu">Bond Driver Options</span>. The following modes
       are available:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.4.14.5.3.4.2.5.2.1"><span class="term"><code class="literal">balance-rr</code>
        </span></dt><dd><p>
          Provides load balancing and fault tolerance, at the cost of
          out-of-order packet transmission. This may cause delays, for
          example, for TCP reassembly.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.2"><span class="term"><code class="literal">active-backup</code>
        </span></dt><dd><p>
          Provides fault tolerance.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.3"><span class="term"><code class="literal">balance-xor</code>
        </span></dt><dd><p>
          Provides load balancing and fault tolerance.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.4"><span class="term"><code class="literal">broadcast</code>
        </span></dt><dd><p>
          Provides fault tolerance.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.5"><span class="term"><code class="literal">802.3ad</code>
        </span></dt><dd><p>
          Provides dynamic link aggregation if supported by the connected
          switch.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.6"><span class="term"><code class="literal">balance-tlb</code>
        </span></dt><dd><p>
          Provides load balancing for outgoing traffic.
         </p></dd><dt id="id-1.4.4.14.5.3.4.2.5.2.7"><span class="term"><code class="literal">balance-alb</code>
        </span></dt><dd><p>
          Provides load balancing for incoming and outgoing traffic, if the
          network devices used allow the modifying of the network device's
          hardware address while in use.
         </p></dd></dl></div></li><li class="step"><p>
       Make sure to add the parameter <code class="literal">miimon=100</code> to
       <span class="guimenu">Bond Driver Options</span>. Without this parameter, the
       link is not checked regularly, so the bonding driver might continue
       to lose packets on a faulty link.
      </p></li></ol></li><li class="step"><p>
     Click <span class="guimenu">Next</span> and leave YaST with
     <span class="guimenu">OK</span> to finish the configuration of the bonding
     device. YaST writes the configuration to
     <code class="filename">/etc/sysconfig/network/ifcfg-bond<em class="replaceable">DEVICENUMBER</em></code>.
    </p></li></ol></div></div></section><section class="sect1" id="sec-ha-netbond-hotpug-yast" data-id-title="Hotplugging devices into a bond"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16.2 </span><span class="title-name">Hotplugging devices into a bond</span></span> <a title="Permalink" class="permalink" href="cha-ha-netbonding.html#sec-ha-netbond-hotpug-yast">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Sometimes it is necessary to replace an interface in a bond with
   another one, for example, if the respective network device constantly
   fails. The solution is to set up hotplugging. It is also
   necessary to change the <code class="systemitem">udev</code> rules to match the
   device by bus ID instead of by MAC address. This enables you to replace
   defective hardware (a network card in the same slot but with a different
   MAC address), if the hardware allows for that.
  </p><div class="procedure" id="id-1.4.4.14.6.3" data-id-title="Hotplugging devices into a bond with YaST"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 16.1: </span><span class="title-name">Hotplugging devices into a bond with YaST </span></span><a title="Permalink" class="permalink" href="cha-ha-netbonding.html#id-1.4.4.14.6.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><p>
    If you prefer manual configuration instead, refer to the SUSE Linux Enterprise Server
    Administration Guide, chapter <em class="citetitle">Basic Networking</em>, section
    <em class="citetitle">Hotplugging of bond ports</em>.
   </p><ol class="procedure" type="1"><li class="step"><p>
     Start YaST as <code class="systemitem">root</code> and select <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
    </p></li><li class="step"><p>
     In the <span class="guimenu">Network Settings</span>, switch to the
     <span class="guimenu">Overview</span> tab, which shows the already configured
     devices. If devices are already configured in a bond, the
     <span class="guimenu">Note</span> column shows it.
    </p></li><li class="step"><p>
     For each of the Ethernet devices that have been aggregated to a bonding
     device, execute the following steps:
    </p><ol type="a" class="substeps"><li class="step"><p>
       Select the device to change and click <span class="guimenu">Edit</span>. The
       <span class="guimenu">Network Card Setup</span> dialog opens.
      </p></li><li class="step"><p>
       Switch to the <span class="guimenu">General</span> tab and make sure that
       <span class="guimenu">Activate device</span> is set to <code class="literal">On
       Hotplug</code>.
      </p></li><li class="step"><p>
       Switch to the <span class="guimenu">Hardware</span> tab.
      </p></li><li class="step"><p>
       For the <span class="guimenu">Udev rules</span>, click
       <span class="guimenu">Change</span> and select the <span class="guimenu">BusID</span>
       option.
      </p></li><li class="step"><p>
       Click <span class="guimenu">OK</span> and <span class="guimenu">Next</span> to return to
       the <span class="guimenu">Overview</span> tab in the <span class="guimenu">Network
       Settings</span> dialog. If you click the Ethernet device entry
       now, the bottom pane shows the device's details, including the bus
       ID.
      </p></li></ol></li><li class="step"><p>
     Click <span class="guimenu">OK</span> to confirm your changes and leave the
     network settings.
    </p></li></ol></div></div><p>
   At boot time, the network setup does not wait for the hotplug devices, but
   for the bond to become ready, which needs at least one available device.
   When one of the interfaces is removed from the system (unbind from
   NIC driver, <code class="command">rmmod</code> of the NIC driver or true PCI
   hotplug removal), the Kernel removes it from the bond automatically. When
   a new card is added to the system (replacement of the hardware in the
   slot), <code class="systemitem">udev</code> renames it by applying the bus-based
   persistent name rule and calls <code class="command">ifup</code> for it. The
   <code class="command">ifup</code> call automatically joins it into the bond.
  </p></section><section class="sect1" id="sec-ha-netbonding-more" data-id-title="For more information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16.3 </span><span class="title-name">For more information</span></span> <a title="Permalink" class="permalink" href="cha-ha-netbonding.html#sec-ha-netbonding-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-sleha/edit/main/xml/ha_netbonding.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All modes and many options are explained in detail in the
   <span class="guimenu">Linux Ethernet Bonding Driver HOWTO</span>. The file can be
   found at
   <code class="filename">/usr/src/linux/Documentation/networking/bonding.txt</code>
   after you have installed the package
   <code class="systemitem">kernel-source</code>.
  </p><p>
   For High Availability setups, the following options described therein are
   especially important: <code class="option">miimon</code> and
   <code class="option">use_carrier</code>.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ha-acl.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 15 </span>Access control lists</span></a> </div><div><a class="pagination-link next" href="cha-ha-lb.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 17 </span>Load balancing</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-ha-netbonding.html#sec-ha-netbond-yast"><span class="title-number">16.1 </span><span class="title-name">Configuring bonding devices with YaST</span></a></span></li><li><span class="sect1"><a href="cha-ha-netbonding.html#sec-ha-netbond-hotpug-yast"><span class="title-number">16.2 </span><span class="title-name">Hotplugging devices into a bond</span></a></span></li><li><span class="sect1"><a href="cha-ha-netbonding.html#sec-ha-netbonding-more"><span class="title-number">16.3 </span><span class="title-name">For more information</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>